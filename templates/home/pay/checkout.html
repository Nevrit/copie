{% extends "panel/base.html" %}
{% load static %}
{% block content %}
{% include "panel/header.html" %}

<div class="section">
    <div class="container">
        <form action="" method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="nom" class="form-label">Nom *</label>
                        <input type="text" class="form-control" id="nom" name="nom" value="{{ user.last_name }}" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="prenom" class="form-label">Prénom *</label>
                        <input type="text" class="form-control" id="prenom" name="prenom" value="{{ user.first_name }}" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="telephone" class="form-label">Téléphone *</label>
                        <input type="tel" class="form-control" id="telephone" name="telephone" value="{{ user.telephone }}" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="autre_telephone" class="form-label">Autre Contact *</label>
                        <input type="tel" class="form-control" id="autre_telephone" name="autre_telephone" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="ville class=" form-label">Ville *</label>
                        <input type="text" class="form-control" id="ville" name="ville" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="adresse" class="form-label">Adresse de livraison *</label>
                        <input type="text" class="form-control" id="adresse" name="adresse" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="products-tabs">
                        <!-- tab -->
                        <div id="tab1" class="tab-pane active">
                            <div class="products-slick" data-nav="#slick-nav-1">
                                <!-- product -->
                                {% for item in items %}
                                <div class="product">
                                    <div class="product-img">
                                        <img src='{{ item.product.image.url }}' alt=" {{ item.product.name }} ">
                                    </div>
                                    <div class="product-body">
                                        <p class="product-category"> {{ product.category }} </p>
                                        <h3 class="product-name"><a href="#">{{ item.product.name }}</a></h3>
                                        <h4 class="product-price">Quantité : {{ item.quantity }} </h4>
                                        <h4 class="product-price">Prix : {{ item.product.price }} FCFA</h4>
                                        <!-- JE DOIS GÉRER LES ANCIENS PRIX -->
                                        <div class="product-rating">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                                <!-- /product -->
                            </div>
                            <div id="slick-nav-1" class="products-slick-nav"></div>
                        </div>
                        <!-- /tab -->
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6 col-md-12 col-xs-6 text-center cart-area-color">
                    <h3>Résumé de la commande</h3>
                    {% if items %}
                    <p>
                        Total articles : {{ items.count }}
                    </p>
                    <p>
                        Prix de tous les articles : {{ total_price }}
                    </p>
                    <p>
                        Frais de livraison : 1000 FCFA
                    </p>
                    <h4>
                        Total : {{ total_price }}
                    </h4>
                    {% endif %}
                </div>
            </div>
            <div class="row">
                <div class="col-6 col-md-12 col-xs-6 text-center cart-area-color">
                    <h3>Mode de paiement</h3>
                    {% if items %}
                        <div class="form-group">
                            <label for="payment-method">Mode de paiement :</label>
                            <select id="payment-method" name="payment_method" class="form-control">
                                <option value="Paiement à la livraison">Paiement à la livraison</option>
                                <option value="Paiement par carte bancaire">Paiement par carte bancaire</option>
                                <option value="Paiement par mobile money">Paiement par mobile money</option>
                            </select>
                            <!-- ... autres champs du formulaire ... -->
                        </div>
                    {% endif %}
                </div>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary" style="border-radius:20px; margin-top: 50px;">
                        Confirmer la commande
                    </button>
                </div>
        </form>
    </div>
</div>
{% endblock %}